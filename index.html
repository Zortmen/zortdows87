<!DOCTYPE html>
<html lang="tr"><head>
<meta charset="UTF-8">
<title>Masa√ºst√º</title>
<style>body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(120deg, #0a3d62, #1e90ff);
    font-family: Segoe UI, Arial;
    overflow: hidden;
    user-select: none;
}

/* Masa√ºst√º */
.desktop {
    padding: 20px;
    display: grid;
    grid-template-columns: repeat(auto-fill, 80px);
    gap: 20px;
}

.icon {
    width: 80px;
    text-align: center;
    color: white;
    cursor: pointer;
}

.icon img {
    width: 64px;
}

.icon:hover {
    background: rgba(255,255,255,0.15);
    border-radius: 6px;
}

/* G√∂rev √ßubuƒüu */
.taskbar {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 40px;
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    padding: 0 10px;
    color: white;
}

/* Pencere */
.window {
    position: absolute;
    top: 80px;
    left: 200px;
    width: 800px;
    height: 500px;
    background: #f1f1f1;
    border-radius: 6px;
    box-shadow: 0 0 15px black;
    display: none;
    overflow: hidden;
}

.titlebar {
    background: #0078D7;
    color: white;
    padding: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.close {
    cursor: pointer;
}

/* Chrome */
.browser-bar {
    display: flex;
    padding: 6px;
    background: #e5e5e5;
}

.browser-bar input {
    flex: 1;
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.browser-bar button {
    margin-left: 6px;
}

iframe {
    width: 100%;
    height: calc(100% - 78px);
    border: none;
}
#pyCode {
    width: 100%;
    height: 200px;
    font-family: monospace;
}

#pyOutput {
    background: black;
    color: #0f0;
    height: 150px;
    overflow: auto;
    padding: 6px;
}

.explorer-container {
    display: flex;
    height: 350px;
}

.folders {
    width: 150px;
    background: #ddd;
    padding: 10px;
    border-right: 1px solid #aaa;
}

.folders ul, .files ul {
    list-style: none;
    padding: 0;
}

.folders li, .files li {
    padding: 4px;
    cursor: pointer;
}

.folders li:hover, .files li:hover {
    background: rgba(0,0,0,0.1);
}

.files {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
}



#saat {
    position: fixed;
    right: 10px;
    bottom: 10px;
    font-family: Arial, sans-serif;
    font-size: 17px;
}

.task-icon img {
    margin-left: 5px;
    margin-right: 5px;
}


</style>

</head>

<body id="desktop" style="background-image: url(&quot;https://uploads.onecompiler.io/446ptsdzc/446ptk3qx/zortmen.png&quot;);">
<div id="loginScreen" style="position: fixed; inset: 0px; background: rgb(10, 61, 98); display: none; align-items: center; justify-content: center; z-index: 9999; color: white;">

  <div style="text-align:center">
    <h2>Ho≈ü geldin</h2>
    <input id="loginUser" placeholder="Kullanƒ±cƒ± adƒ±"><br><br>
    <input id="loginPass" type="password" placeholder="≈ûifre"><br><br>
    <button onclick="login()">Giri≈ü</button>
  </div>
</div>
<script>function login(){
  if(loginUser.value && loginPass.value){
    localStorage.setItem("user", loginUser.value);
    loginScreen.style.display="none";
    notify("Ho≈ü geldin "+loginUser.value);
  }
}
if(localStorage.getItem("user")){
  loginScreen.style.display="none";
}
</script>
<!------------------------------>
  <div class="desktop"> 
    <!-- python -->
      <div class="icon" onclick="openWindow('python')"> 
      <img src="https://img.icons8.com/color/96/python.png"> 
      <div>Python</div> 
    </div>

    <div class="icon" onclick="openWindow('gameWindow')">
       <img src="https://img.icons8.com/color/96/controller.png">
       <div>Oyunlar</div>
    </div>

    <div class="icon" onclick="openWindow('paint')">
       <img src="https://img.icons8.com/color/96/paint.png">
       <div>Paint</div>
    </div>

<div class="icon" onclick="openWindow('calculator')">
  <img src="https://img.icons8.com/color/96/calculator.png">
  <div>Hesap Makinesi</div>
</div>
<div class="icon" onclick="openWindow('store')">
  <img src="https://img.icons8.com/color/96/shop.png">
  <div>Zortdows Store</div>
</div>


    <!-- Chrome -->
    <div class="icon" onclick="openWindow('chrome')">
        <img src="https://img.icons8.com/color/96/chrome.png">
        <div>Google Chrome</div>
    </div>

    <!-- Not Defteri -->
    <div class="icon" onclick="openWindow('notepad')">
        <img src="https://img.icons8.com/color/96/notepad.png">
        <div>Not Defteri</div>
    </div>
    <!-- Ayarlar -->
    <div class="icon" onclick="openWindow('settings')">
        <img src="https://img.icons8.com/color/96/settings.png">
        <div>Ayarlar</div>
    </div>

<!-- CHROME -->
<div class="window" id="chrome">
    <div class="titlebar">
        Google Chrome
        <span onclick="closeWindow('chrome')">‚úñ</span>
        
        <span onclick="toggleFullScreen(this)" style="cursor:pointer; margin-left:5px">‚õ∂</span>
        
        
    </div>

    <div class="browser-bar">
        <button onclick="refreshTab()">‚ü≥</button>
        <input id="url" value="https://pierrepapierciseaux.net/.skynet/" onkeydown="enterSite(event)">
        <button onclick="loadSite()">Git</button>
    </div>

    <iframe id="browser"></iframe>
</div>

<div class="icon" onclick="openWindow('explorer')">
    <img src="https://img.icons8.com/color/96/folder-invoices.png">
    <div>Dosya Gezgini</div>
</div>


<!-- NOT DEFTERƒ∞ -->
<div class="window" id="notepad">
    <div class="titlebar">
        Not Defteri
        <span onclick="closeWindow('notepad')">‚úñ</span>
        <span onclick="toggleFullScreen(this)" style="cursor:pointer; margin-left:5px">‚õ∂</span>
    </div>

    <div class="notepad-toolbar">
        <button onclick="newFile()">Yeni</button>
        <button onclick="saveFile()">Kaydet</button>
        <select id="fileList" onchange="loadFile()"></select>
    </div>

    <textarea id="textArea" placeholder="Metin yaz..."></textarea>
</div>

<!-- AYARLAR -->
<div class="window" id="settings">
    <div class="titlebar">
        Ayarlar
        <span onclick="closeWindow('settings')">‚úñ</span>
        
    </div>

    <div class="content" style="padding:10px">

  <h3>üé® G√∂r√ºn√ºm</h3>
  <input id="bgUrl" placeholder="Arka plan linki gir">
  <button onclick="changeBackground()">Uygula</button>
  <p>Bu webOS'u <strong>ƒ∞brahim √áƒ±nar Arslan</strong> yapmƒ±≈ütƒ±r.</p>


</div>

</div>

<!-- PYTHON -->
<div class="window" id="python">
    <div class="titlebar">
        Python (.py)
        <span onclick="closeWindow('python')">‚úñ</span>
        <span onclick="toggleFullScreen(this)" style="cursor:pointer; margin-left:5px">‚õ∂</span>
    </div>

    <div class="notepad-toolbar">
        <button onclick="newPy()">Yeni</button>
        <button onclick="savePy()">Kaydet</button>
        <button onclick="runPy()">√áalƒ±≈ütƒ±r ‚ñ∂</button>
        <select id="pyList" onchange="loadPy()"></select>
    </div>

    <textarea id="pyCode" placeholder="print('Merhaba')"></textarea>
    <pre id="pyOutput"></pre>
</div>
<div class="window" id="explorer">
    <div class="titlebar">
        Dosya Gezgini
        <span onclick="closeWindow('explorer')">‚úñ</span>
        <span onclick="toggleFullScreen(this)" style="cursor:pointer; margin-left:5px">‚õ∂</span>
    </div>
    <div class="explorer-container">
        <div class="folders">
            <h4>Klas√∂rler</h4>
            <ul>
                <li onclick="showFolder('Masa√ºst√º')">Masa√ºst√º</li>
                <li onclick="showFolder('Belgeler')">Not Defteri</li>
                <li onclick="showFolder('Python')">Python</li>
            </ul>
        </div>
        <div class="files">
            <h4>Dosyalar</h4>
            <ul id="fileView"></ul>
        </div>
    </div>
</div>
<div class="window" id="store">
  <div class="titlebar">
    Zortdows Store
    <span onclick="closeWindow('store')">‚úñ</span>
  </div>

  <div style="padding:10px;display:grid;grid-template-columns:repeat(auto-fill,180px);gap:10px" id="storeList"></div>
</div>
<script>
// üè™ STORE UYGULAMALARI
const STORE_APPS = [
  { id:"superzort", name:"Super Zort", icon:"https://img.icons8.com/color/96/super-mario.png", url:"mario.html" },
  { id:"snake", name:"ZortSnake", icon:"https://img.icons8.com/color/96/snake.png", url:"snake.html" },
  { id:"clicker", name:"ZortClicker", icon:"https://img.icons8.com/color/96/mouse.png", url:"clicker.html" },
  { id:"zortchat", name:"ZortCraft", icon:"https://img.icons8.com/color/96/mine.png", url:"mc.html" },
  { id:"zortjump", name:"ZortJump", icon:"https://img.icons8.com/color/96/ninja.png", url:"zort.html" },
];

let installedApps = JSON.parse(localStorage.getItem("zortdows_installed")) || [];

function saveApps(){
  localStorage.setItem("zortdows_installed", JSON.stringify(installedApps));
}

// üß± STORE Lƒ∞STE
function loadStore(){
  storeList.innerHTML="";
  STORE_APPS.forEach(app=>{
    const installed = installedApps.includes(app.id);
    storeList.innerHTML += `
      <div style="background:#eee;color:#000;border-radius:10px;padding:10px;text-align:center">
        <img src="${app.icon}" width="64"><br>
        <b>${app.name}</b><br>
        <button onclick="installApp('${app.id}')" ${installed?"disabled":""}>
          ${installed?"Y√ºkl√º":"Y√ºkle"}
        </button>
      </div>
    `;
  });
}

function installApp(id){
  if(!installedApps.includes(id)){
    installedApps.push(id);
    saveApps();
    loadStore();
    loadDesktopApps();
  }
}

// üñ•Ô∏è MASA√úST√úNE KURULU UYGULAMALAR
function loadDesktopApps(){
  const desktop = document.querySelector(".desktop");

  desktop.querySelectorAll(".app-icon").forEach(e=>e.remove());

  installedApps.forEach(id=>{
    const app = STORE_APPS.find(a=>a.id===id);
    if(!app) return;

    const div = document.createElement("div");
    div.className = "icon app-icon";

    div.innerHTML = `
      <img src="${app.icon}">
      <div>${app.name}</div>
    `;

    // üî¥ ƒ∞≈ûTE TAM BURASI üî¥
    div.dataset.appId = app.id;

    const savedName = localStorage.getItem("app_name_"+app.id);
    if(savedName){
      div.querySelector("div").innerText = savedName;
    }
    // üî¥ BURAYA KADAR üî¥

    div.onclick = ()=>openApp(app);
    desktop.appendChild(div);
  });
}


// ü™ü APP A√á
function openApp(app){
  let win = document.createElement("div");
  win.className="window";
  win.style.display="block";
  win.style.left="120px";
  win.style.top="80px";
  win.style.zIndex=++topZ;

  win.innerHTML=`
    <div class="titlebar">
      ${app.name}
      <div>
        <span onclick="toggleFullScreen(this)" style="cursor:pointer;margin-right:8px">‚õ∂</span>
        <span onclick="this.closest('.window').remove()">‚úñ</span>
      </div>
    </div>
    <iframe src="${app.url}"></iframe>
  `;

  document.body.appendChild(win);
}


// ƒ∞lk y√ºkleme
loadStore();
loadDesktopApps();
</script>


<div class="window" id="gameWindow">
    <div class="titlebar">
        Oyunlar
        <span onclick="closeWindow('gameWindow')">‚úñ</span>
        <span onclick="toggleFullScreen(this)" style="cursor:pointer; margin-left:5px">‚õ∂</span>
    </div>

    <iframe id="gameIframe" src="https://zortmen.github.io/Zortmen-Sitesi/oyun.html">
    </iframe>
</div>
<div class="window" id="paint">
    <div class="titlebar">
        paint
        <span onclick="closeWindow('paint')">‚úñ</span>
        <span onclick="toggleFullScreen(this)" style="cursor:pointer; margin-left:5px">‚õ∂</span>
    </div>

    <iframe id="gameIframe" src="https://jspaint.app/">
    </iframe>
</div>
<div class="window" id="calculator">
  <div class="titlebar">
    Hesap Makinesi
    <span onclick="closeWindow('calculator')">‚úñ</span>
  </div>
  <div style="padding:10px">
    <input id="calcDisplay" readonly="" style="width:100%;height:40px;font-size:20px;text-align:right">
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:5px;margin-top:5px">
      <button onclick="c('7')">7</button>
      <button onclick="c('8')">8</button>
      <button onclick="c('9')">9</button>
      <button onclick="c('/')">√∑</button>
      <button onclick="c('4')">4</button>
      <button onclick="c('5')">5</button>
      <button onclick="c('6')">6</button>
      <button onclick="c('*')">√ó</button>
      <button onclick="c('1')">1</button>
      <button onclick="c('2')">2</button>
      <button onclick="c('3')">3</button>
      <button onclick="c('-')">‚àí</button>
      <button onclick="c('0')">0</button>
      <button onclick="c('.')">.</button>
      <button onclick="clr()">C</button>
      <button onclick="c('+')">+</button>
      <button onclick="res()" style="grid-column:span 4">=</button>
    </div>
  </div>
</div>
<script>
let expr="";
function c(v){expr+=v;calcDisplay.value=expr}
function clr(){expr="";calcDisplay.value=""}
function res(){
  try{expr=eval(expr).toString();calcDisplay.value=expr}
  catch{calcDisplay.value="Hata";expr=""}
}
</script>
<script>
document.querySelectorAll(".icon").forEach((icon,i)=>{
  const label=icon.querySelector("div");

  const saved=localStorage.getItem("icon_name_"+i);
  if(saved) label.innerText=saved;

  icon.addEventListener("contextmenu",e=>{
    e.preventDefault();
    const n=prompt("Yeni ad:",label.innerText);
    if(n && n.trim()){
      label.innerText=n.trim();
      localStorage.setItem("icon_name_"+i,n.trim());
    }
  });
});
</script>


<div class="taskbar">üîä üì∂&nbsp;&nbsp;
<div class="task-icon" onclick="openWindow('python')">
  <img src="https://img.icons8.com/color/96/python.png" width="30px" class="python_taskbar_ikonu">
</div>

<div class="task-icon" onclick="openWindow('gameWindow')">
  <img src="https://img.icons8.com/color/96/controller.png" width="30px">
</div>
<div class="task-icon" onclick="openWindow('paint')">
  <img src="https://img.icons8.com/color/96/paint.png" width="30px">
</div>

<div class="task-icon" onclick="openWindow('calculator')">
  <img src="https://img.icons8.com/color/96/calculator.png" width="30px">
</div>
<div class="task-icon" onclick="openWindow('store')">
     <img src="https://img.icons8.com/color/96/shop.png" width="30px">
</div>


<div class="task-icon" onclick="openWindow('chrome')">
  <img src="https://img.icons8.com/color/96/chrome.png" width="30px">
</div>
<div class="task-icon" onclick="openWindow('notepad')">
  <img src="https://img.icons8.com/color/96/notepad.png" width="30px">
</div>
<div id="saat">15:08 27.01.2026</div>
</div>
<div class="window" id="store">

  
</div>
<script>
function refreshTab(){
    let iframe = document.getElementById("browser");
    let src = iframe.src;
    iframe.src = "";
    iframe.src = src;
}

function saatiGuncelle() {
    const now = new Date();

    const saat = String(now.getHours()).padStart(2, '0');
    const dakika = String(now.getMinutes()).padStart(2, '0');

    const gun = String(now.getDate()).padStart(2, '0');
    const ay = String(now.getMonth() + 1).padStart(2, '0');
    const yil = now.getFullYear();

    document.getElementById("saat").innerText =
        `${saat}:${dakika} ${gun}.${ay}.${yil}`;
}

//iframe engeli 
if (window.top !== window.self) {
    document.body.innerHTML = `
        <div style="
            font-family: monospace;
            background:#000;
            color:#0f0;
            padding:20px">
            üö´ zortOS iframe i√ßinde √ßalƒ±≈ütƒ±rƒ±lamaz.
        </div>
    `;
}

saatiGuncelle();
setInterval(saatiGuncelle, 1000);
/* Pencere */
function openWindow(id) {
    document.getElementById(id).style.display = "block";

    // Eƒüer oyun penceresi a√ßƒ±lƒ±yorsa, iframe'i yenile
    if(id === "gameWindow") {
        let iframe = document.getElementById("gameIframe");
        let src = iframe.src;
        iframe.src = ""; // √∂nce bo≈ü yap
        iframe.src = src; // sonra tekrar ata
    }
}

function closeWindow(id) {
    document.getElementById(id).style.display = "none";
}




/* Chrome */
function loadSite(){
    let url=document.getElementById("url").value;
    if(!url.startsWith("http")) url="https://"+url;
    document.getElementById("browser").src=url;
}
function enterSite(e){ if(e.key==="Enter") loadSite(); }

/* Arkaplan */
function changeBackground(){
    let url=document.getElementById("bgUrl").value;
    document.body.style.backgroundImage=`url('${url}')`;
    localStorage.setItem("bg",url);
}
if(localStorage.getItem("bg")){
    document.body.style.backgroundImage=`url('${localStorage.getItem("bg")}')`;
}


/* Not Defteri */
let currentFile=null;

function newFile(){
    currentFile=prompt("Dosya adƒ±:");
    if(currentFile){
        localStorage.setItem("txt_"+currentFile,"");
        loadFileList();
        document.getElementById("textArea").value="";
    }
}

function saveFile(){
    if(!currentFile){
        alert("Dosya se√ßili deƒüil");
        return;
    }
    localStorage.setItem("txt_"+currentFile,document.getElementById("textArea").value);
}

function loadFile(){
    currentFile=document.getElementById("fileList").value;
    document.getElementById("textArea").value=
        localStorage.getItem("txt_"+currentFile)||"";
}

function loadFileList(){
    let list=document.getElementById("fileList");
    list.innerHTML="";
    for(let k in localStorage){
        if(k.startsWith("txt_")){
            let opt=document.createElement("option");
            opt.value=k.replace("txt_","");
            opt.textContent=opt.value;
            list.appendChild(opt);
        }
    }
}
loadFileList();
</script>
<script>
let pyCurrent = null;

/* Dosya i≈ülemleri */
function newPy(){
    pyCurrent = prompt("Dosya adƒ± (.py):");
    if(pyCurrent){
        localStorage.setItem("py_"+pyCurrent,"");
        loadPyList();
        pyCode.value="";
        pyOutput.textContent="";
    }
}

function savePy(){
    if(!pyCurrent) return alert("Dosya yok");
    localStorage.setItem("py_"+pyCurrent, pyCode.value);
}

function loadPy(){
    pyCurrent = pyList.value;
    pyCode.value = localStorage.getItem("py_"+pyCurrent) || "";
}



/* Liste */
function loadPyList(){
    pyList.innerHTML="";
    for(let k in localStorage){
        if(k.startsWith("py_")){
            let o=document.createElement("option");
            o.value=k.replace("py_","");
            o.textContent=o.value;
            pyList.appendChild(o);
        }
    }
}
loadPyList();

const today = new Date();
const day = today.getDate();
const month = today.getMonth(); // Ocak = 0

if (day === 26 && month === 0) {
  alert("üéâüéâ Bug√ºn 26 Ocak! ZORTDOWS G√úN√ú KUTLU OLSUN! üéâüéâ");
}







/* PYTHON √áALI≈ûTIR */
function runPy(){
    pyOutput.textContent="";
    let vars = {};
    let lines = pyCode.value.split("\n");

    for(let i=0;i<lines.length;i++){
        let line = lines[i].trim();

        /* print */
        if(line.startsWith("print")){
            let content = line.match(/print\((.*)\)/)[1];
            pyOutput.textContent += evalExpr(content, vars) + "\n";
        }

        /* input */
        else if(line.includes("= input")){
            let name = line.split("=")[0].trim();
            let msg = line.match(/input\((.*)\)/)[1];
            vars[name] = prompt(evalExpr(msg, vars));
        }

        /* if */
        else if(line.startsWith("if")){
            let cond = line
                .replace("if","")
                .replace(":","")
                .trim();

            let result = evalCond(cond, vars);
            if(!result){
                i++; // bir satƒ±r atla
            }
        }

        /* deƒüi≈üken */
        else if(line.includes("=")){
            let [a,b] = line.split("=");
            vars[a.trim()] = evalExpr(b.trim(), vars);
        }
    }
}

/* Yardƒ±mcƒ±lar */
function evalExpr(expr, vars){
    for(let v in vars){
        expr = expr.replaceAll(v, `"${vars[v]}"`);
    }
    return eval(expr);
}

function evalCond(cond, vars){
    for(let v in vars){
        cond = cond.replaceAll(v, `"${vars[v]}"`);
    }
    return eval(cond);
}
</script>
<script>
  let currentFolder = "Masa√ºst√º";

function showFolder(folder){
    currentFolder = folder;
    let view = document.getElementById("fileView");
    view.innerHTML = "";

    // T√ºm localStorage dosyalarƒ±nƒ± al
    for(let k in localStorage){
        let type = "";
        if(k.startsWith("txt_")) type = "txt";
        if(k.startsWith("py_")) type = "py";
        if(!type) continue;

        // Dosya hangi klas√∂rdeyse g√∂ster
        if(folder==="Masa√ºst√º" && k.includes("_desktop")) view.appendChild(fileItem(k, type));
        else if(folder==="Python" && type==="py") view.appendChild(fileItem(k, type));
        else if(folder==="Belgeler" && type==="txt") view.appendChild(fileItem(k, type));
    }
}

function fileItem(key, type){
    let li = document.createElement("li");
    li.textContent = key.replace(type+"_","");
    
    // Dosyaya tƒ±klayƒ±nca a√ß
    li.onclick = ()=>{
        if(type==="txt"){
            currentFile = key.replace("txt_","");
            document.getElementById("textArea").value = localStorage.getItem(key)||"";
            openWindow('notepad');
        }
        else if(type==="py"){
            pyCurrent = key.replace("py_","");
            document.getElementById("pyCode").value = localStorage.getItem(key)||"";
            openWindow('python');
        }
    };

    // Saƒü tƒ±k ‚Üí sadece dosya sil
    li.oncontextmenu = (e)=>{
        e.preventDefault(); // default saƒü tƒ±k men√ºy√º engelle
        if(confirm(`"${li.textContent}" silinsin mi?`)){
            localStorage.removeItem(key); // sadece dosyayƒ± kaldƒ±r
            showFolder(currentFolder);     // paneli g√ºncelle
        }
    };

    return li;
}

// ƒ∞lk a√ßƒ±lƒ±≈ü
showFolder(currentFolder);

</script>

<script>function toggleFullScreen(el){
  let win = el.closest(".window");
  if(!win.classList.contains("fullscreen")){
    // Tam ekran yap
    win.dataset.oldStyle = JSON.stringify({
      left: win.style.left,
      top: win.style.top,
      width: win.style.width,
      height: win.style.height,
      z: win.style.zIndex
    });
    win.style.left = "0";
    win.style.top = "0";
    win.style.width = "100vw";
    win.style.height = "100vh";
    win.style.zIndex = 9999;
    win.classList.add("fullscreen");
  } else {
    // √ñnceki boyutlarƒ± geri getir
    let old = JSON.parse(win.dataset.oldStyle);
    win.style.left = old.left;
    win.style.top = old.top;
    win.style.width = old.width;
    win.style.height = old.height;
    win.style.zIndex = old.z;
    win.classList.remove("fullscreen");
  }
}
</script>

<script>
let activeWindow = null;
let offsetX = 0;
let offsetY = 0;
let topZ = 1000;

document.addEventListener("mousedown", (e) => {
  const titlebar = e.target.closest(".titlebar");
  if (!titlebar) return;

  const win = titlebar.parentElement;

  // tam ekrandaysa s√ºr√ºkleme yok
  if (win.classList.contains("fullscreen")) return;

  activeWindow = win;
  offsetX = e.clientX - win.offsetLeft;
  offsetY = e.clientY - win.offsetTop;

  // √∂ne getir
  topZ++;
  win.style.zIndex = topZ;
});

document.addEventListener("mousemove", (e) => {
  if (!activeWindow) return;

  activeWindow.style.left = (e.clientX - offsetX) + "px";
  activeWindow.style.top  = (e.clientY - offsetY) + "px";
});

document.addEventListener("mouseup", () => {
  activeWindow = null;
});
</script>

<!------------------------------------------------------------------------------>
<div id="contextMenu" style="
  position:fixed;
  display:none;
  background:#222;
  color:white;
  border-radius:6px;
  box-shadow:0 0 10px black;
  z-index:99999;
  font-size:14px;
">
  <div class="cm-item" onclick="renameApp()">‚úèÔ∏è Adƒ±nƒ± Deƒüi≈ütir</div>
  <div class="cm-item" onclick="deleteApp()">üóëÔ∏è Sil</div>
</div>

<style>
.cm-item{
  padding:8px 14px;
  cursor:pointer;
}
.cm-item:hover{
  background:#444;
}
</style>
<script>
let rightClickedAppId = null;
let rightClickedIcon = null;

// masa√ºst√º app ikonlarƒ±na saƒü tƒ±k
document.addEventListener("contextmenu", e=>{
  const icon = e.target.closest(".app-icon");
  if(!icon) return;

  e.preventDefault();

  rightClickedAppId = icon.dataset.appId;
  rightClickedIcon = icon;

  const menu = document.getElementById("contextMenu");
  menu.style.display="block";
  menu.style.left = e.clientX + "px";
  menu.style.top  = e.clientY + "px";
});

// bo≈ü yere tƒ±klayƒ±nca men√ºy√º kapat
document.addEventListener("click", ()=>{
  contextMenu.style.display="none";
});

// ‚úèÔ∏è ad deƒüi≈ütir
function renameApp(){
  const label = rightClickedIcon.querySelector("div");
  const yeni = prompt("Yeni ad:", label.innerText);
  if(yeni && yeni.trim()){
    label.innerText = yeni.trim();
    localStorage.setItem("app_name_"+rightClickedAppId, yeni.trim());
  }
  contextMenu.style.display="none";
}

// üóëÔ∏è sil
function deleteApp(){
  if(!confirm("Bu uygulama kaldƒ±rƒ±lsƒ±n mƒ±?")) return;

  installedApps = installedApps.filter(id=>id!==rightClickedAppId);
  localStorage.setItem("zortdows_installed", JSON.stringify(installedApps));
  localStorage.removeItem("app_name_"+rightClickedAppId);

  loadDesktopApps();
  loadStore();
  contextMenu.style.display="none";
}
</script>



</body></html>
